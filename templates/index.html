<!DOCTYPE html>
<html>
<head>
    <title>Temperature Monitor</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .data-box { background: #f0f0f0; padding: 20px; border-radius: 10px; }
        .temperature { color: #e74c3c; font-size: 24px; }
        .timestamp { color: #7f8c8d; }
    </style>
</head>
<body>
    <h1>Температура с датчика</h1>
    <div class="data-box">
        {% if data %}
            <p class="temperature">{{ data.temperature }} °C</p>
            <p class="timestamp">Обновлено: {{ data.timestamp }}</p>
            <p class="version">Версия данных: {{ data.version }}</p>
        {% else %}
            <p>Загрузка данных...</p>
        {% endif %}
    </div>

    <script>
        // Автообновление данных каждые 3 секунды
        function updateData() {
            fetch('/data')
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        console.error("Ошибка:", data.error);
                        return;
                    }
                    document.querySelector('.temperature').textContent = `${data.temperature} °C`;
                    document.querySelector('.timestamp').textContent = `Обновлено: ${data.timestamp}`;
                    document.querySelector('.version').textContent = `Версия данных: ${data.version}`;
                });
        }

        setInterval(updateData, 3000);
        updateData(); // Первоначальная загрузка
    </script>
</body>
</html>